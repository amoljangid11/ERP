<div class="col-md-12 card card-outline-primary" style="height:100%">
    <div *ngIf = "!show">
      <div>
        <ol class="breadcrumb row bg-primary">
          <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
          <li class="breadcrumb-item ">Expenses </li>
          <li class="breadcrumb-item ">Advances </li>

          <li class="breadcrumb-item ">Employee Advances </li>
          
        </ol>
      </div>
      <div>
        <span style="font-weight:500">Employee Advances</span>
        <button type="button" style="float: right;margin:0% 2% 0% 0%" class="btn btn-outline-primary btn-sm"  (click) = "show = !show;updatebutton=false;">Add</button>
      </div><br><br>
      <div *ngIf="edited" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
        {{ message }}
      </div>
      <div *ngIf="deleted" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
        {{ message }}
      </div>
      <div class="row">
        <div class="col-lg-12">
          <div>
            <table class="table table-bordered table-striped table-sm">
              <thead class="bg-success">
                <tr>
                  <th>Action</th>
                  <th>Employee</th>
                  <th>Amount</th>
                  <th>Utilized</th>
                </tr>
              </thead>
              <tbody>
                  <tr *ngFor="let et of datas;let i = index " >
                      <td><i class="fa fa-eye"  title="View" (click)="open(typeModal);view(et)"></i>&nbsp;&nbsp;<i (click)="edit(et);show=!show;"  title="Edit" class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;<i (click)="delete(et,i)" title="Delete" class="fa fa-trash-o"></i></td>
        <th>{{et.empadvances[0].reportingmanager}}</th>
        <th>{{et.empadvances[0].amount}}</th>
        <th></th></tr>
              </tbody>
              </table>
              </div>
              </div>
              </div>
              </div>
              <form class="form-horizontal" [formGroup]="form">
                  <div *ngIf= "show">
                    <div>
                      <ol class="breadcrumb row bg-primary">
                        <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
                        <li class="breadcrumb-item ">Expenses </li>
                        <li class="breadcrumb-item ">Advances </li>

                        <li class="breadcrumb-item ">Employee Advances </li>
                        
                        <li class="breadcrumb-item active"><i class="fa fa-plus">Add</i></li>
                      </ol>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <md-select placeholder="Employee Name" [(ngModel)]="emp.empadvances[0].reportingmanager" formControlName="emp" required>
                          <md-option>Select Employee Name</md-option>
                          <md-option *ngFor="let employee of assu3"  value="{{employee.official[0].firstname}} {{employee.official[0].lastname}}">
                              {{employee.official[0].firstname}} {{employee.official[0].lastname}}
                          </md-option>
                          
                          
                          </md-select><br>
                          <span style="color: red" *ngIf="!emp.empadvances[0].reportingmanager">
                              please select Employee Name
                        </span>
                      </div>
                      <div class="col-md-3">
                        <md-select placeholder="Project" [(ngModel)]="emp.empadvances[0].projectname" formControlName="project">
                          <md-option>Select Project</md-option>
                          <md-option *ngFor="let projecttime of projecttimes" [value]="projecttime.project[0].projectname">
                          {{projecttime.project[0].projectname}}
                          </md-option>
                          </md-select>
                      </div>
                      <div class="col-md-3">
                        <md-input-container class="example-full-width">
                          <input mdInput placeholder="Amount" [(ngModel)]="emp.empadvances[0].amount"  maxlength="30" formControlName="amount" required>
                          <md-error>Please enter amount.</md-error>
                          </md-input-container><br><br><br>
                      </div>
                      <div class="col-md-3">
                        <md-select placeholder="Payment Mode" [(ngModel)]="emp.empadvances[0].paymode" formControlName="paym" required>
                          <md-option>Select Payment Mode</md-option>
                          <md-option *ngFor="let pay of pays" [value]="pay.paymode[0].paymode">
                          {{pay.paymode[0].paymode}}
                          </md-option>
                          </md-select><br>
                          <span style="color: red" *ngIf="!emp.empadvances[0].paymode">
                            please select Payment Mode
                      </span>
                      </div>
                      <div class="col-md-3">
                        <md-input-container class="example-full-width">
                          <input mdInput placeholder="Payment Ref#" [(ngModel)]="emp.empadvances[0].reference"  maxlength="30" formControlName="reference">
                          
                          </md-input-container><br><br><br>
                      </div>
                      <div class="col-md-3">
                        <md-input-container class="example-full-width">
                          <input mdInput placeholder="Description" [(ngModel)]="emp.empadvances[0].descri"  maxlength="30" formControlName="descri">
                          
                          </md-input-container><br><br><br>
                      </div>
                      <div  class="col-md-12" style="margin-top: 5%">
                        <button *ngIf="!updatebutton" class="btn btn-outline-success btn-sm" (click)="save(emp);show=!show" [disabled]="!form.valid"> Save</button>
        <button *ngIf="updatebutton" class="btn btn-outline-success btn-sm" (click)="update(emp);show=!show;updatebutton=!updatebutton;"> Update</button>
        <button class="btn btn-outline-warning btn-sm" (click) = "cancel(type);show=!show"> Cancel </button>
    
                      </div>
                    </div>

                  </div>
              </form>
              </div>
              <md2-dialog #typeModal>
                <md2-dialog-title>Employee Advances</md2-dialog-title>
                <div class="row">
                  <div style="" class="emp-info"><br>
                        <div class="emp-info alter-div">
                            Employee Name : {{emp.empadvances[0].reportingmanager}}
                        </div>  
                        <div class="emp-info alter-div">
                          Project : {{emp.empadvances[0].projectname}}
                      </div> 
                      <div class="emp-info alter-div">
                        Amount : {{emp.empadvances[0].amount}}
                    </div> 
                    <div class="emp-info alter-div">
                    Payment Mode : {{emp.empadvances[0].paymode}}
                  </div> 
                  <div class="emp-info alter-div">
                    Payment Ref# : {{emp.empadvances[0].reference}}
                  </div> 
                  <div class="emp-info alter-div">
                    Description : {{emp.empadvances[0].descri}}
                  </div> 
                       
                   </div>
                   </div>
                   
                <md2-dialog-footer>
                    <button type="submit" class="btn btn-secondary" (click)="close(typeModal)">Cancel</button>
                </md2-dialog-footer>
              </md2-dialog>
                 