<div class="col-md-12 card card-outline-primary" style="height:100%">
  <div *ngIf = "!show">
    <div >
      <ol class="breadcrumb row bg-primary">
        <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
        <li class="breadcrumb-item ">Organization </li>
        <li class="breadcrumb-item active">Departments</li>
      </ol>
   </div>
    
    <div>
   <span style="font-weight:500">Departments</span>
          <button type="button" style="float: right;margin:0% 2% 0% 0%" class="btn btn-outline-primary btn-sm"  (click) = "show = !show;updatebutton=false">Add</button> 
  </div><br><br>
  
   <div *ngIf="edited" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
        {{ message }}
      </div>
   <div *ngIf="deleted" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
        {{ message }}
      </div>
   
  <div class="row">
  <div class="col-lg-12">
  <div>
    <table  class="table table-bordered table-striped table-sm">
      <thead class="bg-success">
       <tr>
        <th>Action</th>
        <th>Name</th>
        <th>Code</th>
        <th>Started On</th>
        <th>Department Head</th>
        <th>Time Zone</th>
        <th>Business Unit</th>
       </tr>
        </thead>
        <tbody>
          <tr *ngFor="let dp of dunitcoll;let i = index " >
          <td><i  (click)="edit(dp);show=!show"  title="Edit" class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;<i (click)="delete(dp,i)" title="Delete" class="fa fa-trash-o"></i></td>
  
         <td>{{dp.department[0].departmentname}}</td>
         <td>{{dp.department[0].departmentcode}}</td>
         <td>{{dp.department[0].starton}}</td>
         <td>{{dp.department[0].departmenthead}}</td>
         <td>{{dp.department[0].timezone}}</td>
         <td>{{dp.department[0].businessunit}}</td>
      
        </tr>                                 
      </tbody>                        
      </table>
     </div></div>
  </div></div>
  <div *ngIf= "show">
     <div >
      <ol class="breadcrumb  row bg-primary">
        <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
        <li class="breadcrumb-item ">Organization </li>
        <li class="breadcrumb-item ">Departments</li>
        <li class="breadcrumb-item active"><i class="fa fa-plus">Add</i></li>
      </ol>
   </div><br>
  <div class="row">
  <div class="col-md-3">
      <md-input-container class="example-full-width">
         <input mdInput placeholder="Department Name" [(ngModel)]="dunits.department[0].departmentname">
      </md-input-container><br><br><br>
      <md-input-container>
        <input mdInput [mdDatepicker]="pi" placeholder="Started On" [(ngModel)]="dunits.department[0].starton" >
        <button mdSuffix [mdDatepickerToggle]="pi"></button>
      </md-input-container>
      <md-datepicker #pi></md-datepicker> <br><br><br><br>
      <md-select placeholder="City" [(ngModel)]="dunits.department[0].city"> 
          <md-option *ngFor="let ci of cityarry"   [value]="ci.city2">
      {{ci.city2}}
      </md-option>
    </md-select><br>
      <i style="color: #1565c0"   onclick="document.getElementById('ciModal').style.display='block'">Add City</i>
  <br><br><br>  
  </div>
  
  <div class="col-md-3"><br>
   <md-select placeholder="Business Unit" [(ngModel)]="businessunit" name="zone">
     <md-option>Select Business Unit</md-option>
      <md-option *ngFor="let b of bunit" (click)="selectbusiness(b,dunits,businessunit)" [value]="b.businessunits[0].name">
      {{b.businessunits[0].name}}
      </md-option>
      </md-select><br><br><br><br>
  <br>
   <md-select placeholder="Time Zone" [(ngModel)]="dunits.department[0].timezone" name="zone">
      <md-option *ngFor="let s of site_t" [value]="s.timezone">
      {{s.timezone}}
      </md-option>
      </md-select><br>
      <i style="color: #1565c0" onclick="document.getElementById('timemodal').style.display='block'">Add Timezone</i>
  <br><br><br>
  <md-input-container class="example-full-width">
    <input [(ngModel)]="dunits.department[0].address" maxlength="100" mdInput placeholder="Street Address ">
    </md-input-container><br><br><br>   
   </div>
  <div class="col-md-3">
   <md-input-container class="example-full-width">
         <input mdInput placeholder="Department Code" [(ngModel)]="dunits.department[0].departmentcode">
      </md-input-container><br><br><br><br>
  
    <md-select placeholder="Country" [(ngModel)]="dunits.department[0].country">
       <md-option *ngFor="let cn of countri ; let i=index " (click)="selectcoun(cn.countryvalue)" [value]="cn.countryvalue">
      {{cn.countryvalue}}
      </md-option>
    </md-select>
      <br><i style="color: #1565c0"  onclick="document.getElementById('bModal').style.display='block'">Add Country</i>
  <br><br><br>
      <md-input-container class="example-full-width">
      <input  mdInput name="descripe" #message  maxlength="200" [(ngModel)]="dunits.department[0].description" placeholder="Description">
      <md-hint align="start">{{message.value.length}} characters entered(200 maximum)</md-hint>
    </md-input-container><br><br><br><br>
  </div>
  <div class="col-md-3"><br>
  
  <md-select placeholder="Department Head" [(ngModel)]="dunits.department[0].departmenthead" name="zone">
    <md-option>Select Department Head</md-option>
      <md-option *ngFor="let de of offemp" [value]="de.official[0].firstname">
      {{de.official[0].firstname}}  {{de.official[0].lastname}}
      </md-option>
      </md-select><br>
      <i style="color: #1565c0" (click)="open(deptModal)">Add Department Head</i>
   <br><br><br><br>
  <md-select placeholder="State" [(ngModel)]="dunits.department[0].state">
       <md-option *ngFor="let stat of sarray | unique: 'state1' " (click)="select1(stat.state1)" [value]="stat.state1">
      {{stat.state1}}
      </md-option>
    </md-select><br>
    <i style="color: #1565c0" onclick="document.getElementById('sModal').style.display='block'">Add State</i>
   <br><br><br>
  </div>
  <div  class="col-md-12" style="margin-top: 5%">
      <button *ngIf="!updatebutton" class="btn btn-outline-success btn-sm" (click)="save(dunits);show=!show"> Save</button>
          <button *ngIf="updatebutton" class="btn btn-outline-success btn-sm" (click)="update(dunits);show=!show;updatebutton=!updatebutton;"> Update</button>
  
      <button class="btn btn-outline-warning btn-sm" (click) = "cancel(dunits);updatebutton=!updatebutton;show=!show"> Cancel </button>
    </div>
  </div>
  </div>
  </div>
  <div id="sModal" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-teal bg-primary"> 
          <span onclick="document.getElementById('sModal').style.display='none'" 
          class=" w3-display-topright fa fa-times fa-lg"></span>
          <h4>State</h4>
        </header>
        <div class="w3-container">
          <div style="display: inline-flex;"  class="col-md-12">
  <div class="col-md-6">
    <br>
     <md-select placeholder="Country" [(ngModel)]="country1" >
         <md-option *ngFor="let op of countri" [value]="op.countryvalue" (click)="selectstate()">
         {{op.countryvalue}} </md-option>
     </md-select><br><br><br>
  </div>
  <div class="col-md-6">
     <!-- <md-select placeholder="State" [(ngModel)]="state1">
        <md-option *ngFor="let stats of statearry"  [value]="stats.statename" >
          {{stats.statename}}
        </md-option>
     </md-select> -->
     <md-input-container class="example-full-width">
      <input [(ngModel)]="state1" maxlength="100" mdInput placeholder="State Name ">
    </md-input-container>
     <br><br><br>
  </div>
  </div>
        </div>
        <footer class="w3-container w3-teal">
          <button style="float: right;" type="submit" class="btn btn-primary" (click)="savestate()"  data-dismiss="sModal" >Save changes</button>
        </footer>
      </div>
    </div>
  <md2-dialog #deptModal>
      <md2-dialog-title>Department Head</md2-dialog-title>
        <div style="display: inline-flex;"  class="col-md-12"><br>
  <div class="col-md-4">
     <md-input-container class="example-full-width"  >
      <input mdInput placeholder="Employee Code" [value]="employeecode" [readonly]="true" required>
      </md-input-container><br><br><br>
      <md-input-container style="display: both;margin-top: -10%" class="example-full-width">
      <input mdInput placeholder="First Name" [(ngModel)]="fname" required>
      <md-error >
        Please enter First Name.
      </md-error>
      </md-input-container><br><br><br>
      <md-select placeholder="Reporting Manager" [(ngModel)]="rmanager"> 
          <md-option *ngFor="let r of offemp"   [value]="r.official[0].reportingmanager" required>
      {{r.official[0].reportingmanager}}
      </md-option>
      </md-select>
      <br><br><br><br><br>
      <md-select placeholder="Position" [(ngModel)]="position"> 
          <md-option *ngFor="let poss of pos"   [value]="poss.position[0].position" required>
      {{poss.position[0].position}}
      </md-option>
      </md-select>
  </div>
  <div class="col-md-4">
  <md-input-container class="example-full-width">
      <input mdInput placeholder="Employee Id" [(ngModel)]="empid" required>
      <md-error >
        Please enter Employee Id.
      </md-error>
      </md-input-container><br><br>
   <md-input-container class="example-full-width">
      <input mdInput placeholder="Last Name" [(ngModel)]="lname" required>
      <md-error >
        Please enter LastName.
      </md-error>
      </md-input-container>
      <br><br>
      <md-input-container class="example-full-width">
      <input mdInput placeholder="Email" [(ngModel)]="email" required>
      <md-error >
        Please enter Email.
      </md-error>
      </md-input-container>
      <br><br><br><br>
       <md-select placeholder="Employee Status" [(ngModel)]="estatus"> 
          <md-option *ngFor="let wc of wcode"   [value]="wc.employmentstatus[0].workcode" required>
              {{wc.employmentstatus[0].workcode}}
      </md-option>
      </md-select>
      <br><br>
  </div>
  <div class="col-md-4"><br>
   <md-select placeholder="Prefix" [(ngModel)]="prefix"> 
          <md-option *ngFor="let prf of pre"   [value]="prf.prefixes[0].prefixcode" required >
              {{prf.prefixes[0].prefixcode}}
      </md-option>
      </md-select><br><br><br><br>
      <md-select placeholder="Job Title" [(ngModel)]="jtitle"> 
          <md-option *ngFor="let j of jdatas"   [value]="j.jobtitle[0].jobtitle" required>
              {{j.jobtitle[0].jobtitle}}
      </md-option>
      </md-select><br><br><br><br>
      <md-select placeholder="Role" [(ngModel)]="role"> 
          <md-option *ngFor="let ro of rname"   [value]="ro.employeeroles[0].rolename" required>
              {{ro.employeeroles[0].rolename}}
      </md-option>
      </md-select> 
      <br><br><br><br>
      <md-input-container>
       <input mdInput [mdDatepicker]="picker1"  [(ngModel)]="doj" placeholder="Date of Joining" required>
       <md-error>This field is required</md-error>
       <button mdSuffix [mdDatepickerToggle]="picker1"></button>
     </md-input-container>
     <br><br>
     <md-datepicker #picker1></md-datepicker>
  </div>
  </div>
      <md2-dialog-footer>
       <button type="submit" class="btn btn-primary" (click)="savedept()"  data-dismiss="modal" >Save changes</button>
        <button type="submit" class="btn btn-secondary" (click)="close(deptModal)">Cancel</button>
      </md2-dialog-footer>
    </md2-dialog>
  <div id="timemodal" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-teal bg-primary"> 
          <span onclick="document.getElementById('timemodal').style.display='none'" 
          class=" w3-display-topright fa fa-times fa-lg"></span>
          <h4>Timezone</h4>
        </header>
        <div class="w3-container">
          <div style="display: inline-flex;"  class="col-md-12">
          <div class="col-md-6">
      
       <!-- <md-select placeholder="Default Timezone"  [(ngModel)]="timezone" >
      <md-option *ngFor="let t of time_val" [value]="t.timezoneval">
      {{t.timezoneval}}
      </md-option>
      </md-select> -->
      <md-input-container class="example-full-width">
          <input mdInput placeholder="Default Timezone"  [(ngModel)]="timezone">
          </md-input-container>
      
      <br><br><br>
  
     </div>
      <div class="col-md-6">
         <md-input-container class="example-full-width">
                <input mdInput placeholder="Description" [(ngModel)]="description">
                </md-input-container><br><br><br>
        
      </div>
    </div>
        </div>
        <footer class="w3-container w3-teal ">
          <button style="float: right;" type="submit" class="btn btn-primary  bg-primary" (click)="savechang()"  data-dismiss="modal" >Save</button>
        </footer>
      </div>
    </div>
  <div id="ciModal" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-teal bg-primary"> 
          <span onclick="document.getElementById('ciModal').style.display='none'" 
          class="w3-display-topright fa fa-times fa-lg"></span>
          <h4>City</h4>
        </header>
        <div class="w3-container">
           <div style="display: inline-flex;"  class="col-md-12">
     <div class="col-md-6">
     <md-select placeholder="Country" [(ngModel)]="country3">
      <md-option *ngFor="let co of countri | unique: 'countryvalue' ;  " (click)="selectst()" [value]="co.countryvalue">
      {{co.countryvalue}}
      </md-option>
    </md-select><br><br><br>
    <div class="input-group">
       <!-- <md-select placeholder="City" [(ngModel)]="city3"> 
          <md-option *ngFor="let cit of assci"   [value]="cit.cityname">
      {{cit.cityname}}
      </md-option>
    </md-select> -->
    <md-input-container class="example-full-width">
      <input [(ngModel)]="city3" maxlength="100" mdInput placeholder="City Name ">
    </md-input-container>
    
    <br><br><br>
              </div>
     </div>
      <div class="col-md-6">
        <md-select placeholder="State" [(ngModel)]="state3">
       <md-option *ngFor="let stat of addst | unique: 'state1' " (click)="selectcity()" [value]="stat.state1">
      {{stat.state1}}
      </md-option>
    </md-select><br><br><br>
      </div>
     </div>
        </div>
      <footer class="w3-container w3-teal">
        <button style="float: right;" type="submit" class="btn btn-primary" (click)="saveci()"  data-dismiss="modal" >Save changes</button>
      </footer>
      </div>
    </div>
  <div id="bModal" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-teal bg-primary"> 
          <span onclick="document.getElementById('bModal').style.display='none'" 
          class=" w3-display-topright fa fa-times fa-lg"></span>
          <h4>Country</h4>
        </header>
        <div class="w3-container">
              <div style="display: inline-flex;"  class="col-md-12">
  <div class="col-md-6"><br><br>
      <!-- <md-select placeholder="Country" [(ngModel)]="selectedValue" name="cnt">
      <md-option *ngFor="let cntry of conall ;let i=index " [value]="cntry.countryal"  (click)="selects(i,conall)">
        {{cntry.countryal}}
      </md-option>
  
    </md-select> -->
    <md-input-container class="example-full-width">
      <input [(ngModel)]="selectedValue" maxlength="100" mdInput placeholder="Country Name ">
    </md-input-container>
<br><br><br>
  </div>
  <div class="col-md-6"><br><br>
     <div class="input-group">
        <span class="input-group-btn">
          <button class="btn btn-secondary" type="button">Country code</button>
        </span>
        <input type="text" class="form-control" placeholder="code"  [(ngModel)]="codevalue"   [value]="codevalue">
      </div><br><br><br>
  </div>
  </div>
        </div>
        <footer class="w3-container w3-teal">
          <button style="float: right;" type="submit" class="btn btn-primary" (click)="saves()"  data-dismiss="bModal" >Save changes</button>
        </footer>
      </div>
    </div>