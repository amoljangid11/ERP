<div class="col-md-12 card card-outline-primary" style="height:100%">
  <div *ngIf = "!show">
    <div>
      <ol class="breadcrumb row bg-primary">
        <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
        <li class="breadcrumb-item ">Assets </li>
        <li class="breadcrumb-item ">Assets </li>
        
      </ol>
    </div>
    <div>
      <span style="font-weight:500">Assets</span>
      <button type="button" style="float: right;margin:0% 2% 0% 0%" class="btn btn-outline-primary btn-sm"  (click) = "show = !show;updatebutton=false;">Add</button>
 
    </div>
    <div *ngIf="edited" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
      {{ message }}
    </div>
    <div *ngIf="deleted" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
      {{ message }}
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div><br>
          <table class="table table-bordered table-striped table-sm">
            <thead class="bg-success">
              <tr>
                <th>Action</th>
                <th>Asset Name</th>
                <th>Category</th>
                <th>Sub Category</th>
                <th>Company Asset Code</th>
                <th>Working Condition</th>
                <th>Asset Classification</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let et of datas;let i = index " >
                <td> <i class="fa fa-eye"  title="View" (click)="open(typeModal);view(et)"></i>&nbsp;&nbsp;<i (click)="edit(et);show=!show;"  title="Edit" class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;<i (click)="delete(et,i)" title="Delete" class="fa fa-trash-o"></i></td>
                
                <td >{{et.asset[0].assetnm}}</td>
                <td>{{et.asset[0].category}}</td>
                <td>{{et.asset[0].subcategory}}</td>
                <td>{{et.asset[0].assetcode}}</td>
                <td>{{et.asset[0].isworking}}</td>
                <td>{{et.asset[0].classi}}</td>
               
                
                </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
  <form class="form-horizontal" [formGroup]="form">
    <div *ngIf= "show">
      <div>
        <ol class="breadcrumb row bg-primary">
          <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
          <li class="breadcrumb-item ">Assets </li>
          <li class="breadcrumb-item ">Assets </li>
          
          <li class="breadcrumb-item active"><i class="fa fa-plus">Add</i></li>
        </ol>
      </div>
      <div class="row">
        <div class="col-md-3"><br>
          
              <md-select placeholder="Category" [(ngModel)]="ass.asset[0].category" formControlName="cate" required>
                <md-option>Select Category</md-option>
                <md-option *ngFor="let assetcat of assu;let i=index" [value]="assetcat.assetcategories[0].category">
                    {{assetcat.assetcategories[0].category}}
                </md-option>
                </md-select><br>
                <span style="color: red" *ngIf="!ass.asset[0].category">
                    please select Category
              </span><br>

        </div>
        <div class="col-md-3"><br>
          <md-select placeholder="Sub Category" [(ngModel)]="ass.asset[0].subcategory" formControlName="subcate">
            <md-option>Select Sub Category</md-option>
            <md-option *ngFor="let assetcat of assu;let i=index" [value]="assetcat.assetcategories[0].subcategory">
              {{assetcat.assetcategories[0].subcategory}}
          </md-option>
          </md-select>
        </div>
        <div class="col-md-3">
          <md-input-container class="example-full-width">
            <input mdInput placeholder="Company Asset Code" [(ngModel)]="ass.asset[0].assetcode" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="asscode" required>
            <md-error>Please Enter Company Asset Code.</md-error>
        </md-input-container>
  
        </div>
        <div class="col-md-3">
          <md-input-container class="example-full-width">
            <input mdInput placeholder="Asset Name" [(ngModel)]="ass.asset[0].assetnm" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="assname" required>
            <md-error>Please Enter Asset Name.</md-error>
        </md-input-container>

        </div><br>
        <div class="col-md-3">
          <md-select placeholder="Business Unit" [(ngModel)]="ass.asset[0].businessunit" formControlName="bunits" required> 
            <md-option>Select Business Unit</md-option>
            <md-option *ngFor="let bu of bunit ; let i=index " [value]= "bu.businessunits[0].name">
              {{bu.businessunits[0].name}}
              </md-option>
    
          </md-select><br>
          <span style="color: red" *ngIf="!ass.asset[0].businessunit">
              please select Business Unit
        </span><br>

        </div><br>
        <div class="col-md-3">
          <p> Is Working </p> 
                <md-radio-group [(ngModel)]="ass.asset[0].isworking" formControlName="work" required>
                <md-radio-button ng-model="gender" value="yes">Yes</md-radio-button>
                <md-radio-button ng-model="gender" value="no">No</md-radio-button>
                </md-radio-group>

        </div>
        <div *ngIf="ass.asset[0].isworking=='yes'">
            <div class="col-md-12">
                
                    <md-select placeholder="Allocated To" [(ngModel)]="ass.asset[0].allocateTo" formControlName="allocate" required>
                    <md-option>Select Allocated To.</md-option></md-select>
                </div></div>
          
                <div class="col-md-3">
                    <md-select placeholder="Asset Classification" [(ngModel)]="ass.asset[0].classi"  formControlName="classification" required>
                      <md-option>Select Asset Classification</md-option>
                        <md-option *ngFor="let s of assetclassification" [value]="s.viewValue">
                            {{s.viewValue}}
                            </md-option>
                        </md-select><br>
                        <span style="color: red" *ngIf="!ass.asset[0].classi">
                            please select Asset Classification
                      </span><br>
              
                </div>
                <div class="col-md-3">
                    <md-input-container>
                        <input mdInput [mdDatepicker]="picker" placeholder="Purchase Date" [(ngModel)]="ass.asset[0].pdate" formControlName="purdate">
                        <button mdSuffix [mdDatepickerToggle]="picker"></button>
                        </md-input-container>
                        <md-datepicker #picker></md-datepicker>
                </div>
                <div class="col-md-3">
                    <md-input-container class="example-full-width">
                        <input mdInput placeholder="Invoice Number" [(ngModel)]="ass.asset[0].invoice" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="invoiceno">
                        
                    </md-input-container> 
                </div> 
                <div class="col-md-3">
                    <md-input-container class="example-full-width">
                        <input mdInput placeholder="Manufacturer" [(ngModel)]="ass.asset[0].manuf" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="manufac">
                        
                    </md-input-container> 
                </div>
                <div class="col-md-3">
                    <md-input-container class="example-full-width">
                        <input mdInput placeholder="Serial Number" [(ngModel)]="ass.asset[0].serial" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="serialnumber">
                        
                    </md-input-container> 
                </div>
                <div class="col-md-3">
                    <p> Warranty </p> 
                    <md-radio-group [(ngModel)]="ass.asset[0].warranty" formControlName="war" required>
                    <md-radio-button ng-model="gender" value="yes">Yes</md-radio-button>
                    <md-radio-button ng-model="gender" value="no">No</md-radio-button>
                    </md-radio-group>
      
                </div>
                <div *ngIf="ass.asset[0].warranty=='yes'">
                    <div class="col-md-12">
                        <md-input-container>
                            <input mdInput [mdDatepicker]="picker1" placeholder="Warranty/AMC End Date">
                          <button mdSuffix [mdDatepickerToggle]="picker1" ></button>
                         </md-input-container>
                         <md-datepicker #picker1></md-datepicker>
</div></div>  
<div class="col-md-3">
    <md-input-container class="example-full-width">
        <input mdInput #message maxlength="200" placeholder="Notes" [(ngModel)]="ass.asset[0].notes" ng-pattern="/^[A-Za-z0-9_@.#$=!%^)(\]:\*;\?\/\,}{'\|<>\[&\+-]*$/" formControlName="note">
        <md-hint align="end">{{message.value.length}} Characters entered / 200</md-hint>
        </md-input-container>
    
</div>       
<div class="col-md-3">
  
  
  
    <div class="file-field medium">
      <div class="btn btn-outline-primary waves-effect float-left">
        <span>Upload Image<i class="fas fa-cloud-upload-alt ml-1" aria-hidden="true"></i></span>
        <input type="file" multiple [(ngModel)]="ass.asset[0].image" formControlName="image">
      </div>
     
    </div>
  
  
</div>   


        <div  class="col-md-12" style="margin-top: 5%">
          <button *ngIf="!updatebutton" class="btn btn-outline-success btn-sm" (click)="save(ass);show=!show" [disabled]="!form.valid"> Save</button>
        <button *ngIf="updatebutton" class="btn btn-outline-success btn-sm" (click)="update(ass);show=!show;updatebutton=!updatebutton;"> Update</button>
        <button class="btn btn-outline-warning btn-sm" (click) = "cancel(type);show=!show"> Cancel </button>
       
        </div>
      </div>
    </div>
  </form>

</div>

<md2-dialog #typeModal>
  <md2-dialog-title>Assets</md2-dialog-title>
  <div class="row box">
    <div class="emp-info">
         
              Category : {{ass.asset[0].category}}
          </div>  
          <div class="emp-info">
            Sub Category : {{ass.asset[0].subcategory}}
        </div> <br>
        
        <div class="emp-info alter-div">
          Company Asset Code : {{ass.asset[0].assetcode}}
      </div> 
      <div class="emp-info alter-div">
       Asset Name : {{ass.asset[0].assetnm}}

    </div> <br>
    <div class="emp-info">
      Business Unit : {{ass.asset[0].businessunit}}
  </div> 
  <div class="emp-info">
    Is Working : {{ass.asset[0].isworking}}
</div> <br>
<div class="emp-info alter-div">
  Allocated To : {{ass.asset[0].allocateTo}}
</div> 
<div class="emp-info alter-div">
  Asset Classification : {{ass.asset[0].classi}}
</div> <br>
<div class="emp-info">
  Purchase Date : {{ass.asset[0].pdate}}
</div> 
<div class="emp-info">
  Invoice Number : {{ass.asset[0].invoice}}
</div> <br>
<div class="emp-info alter-div">
  Manufacturer : {{ass.asset[0].manuf}}
</div> 
<div class="emp-info alter-div">
  Serial Number : {{ass.asset[0].serial}}
</div><br>
<div class="emp-info">
  Warranty : {{ass.asset[0].warranty}}
</div>
<div class="emp-info">
  Notes : {{ass.asset[0].notes}}
</div> <br>     
     
     </div>
     
  <md2-dialog-footer>
      <button type="submit" class="btn btn-secondary" (click)="close(typeModal)">Cancel</button>
  </md2-dialog-footer>
</md2-dialog>
  