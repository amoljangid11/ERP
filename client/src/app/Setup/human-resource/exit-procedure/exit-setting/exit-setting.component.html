<div class="col-md-12 card card-outline-primary" style="height:100%">
  <div *ngIf = "!show">
      <div >
          <ol class="breadcrumb row bg-primary">
            <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
            <li class="breadcrumb-item ">HR </li>
            <li class="breadcrumb-item ">Exit Procedure </li>
            <li class="breadcrumb-item active">Settings</li>
          </ol>
        </div>
        <div >
          <span style="font-weight:500">Settings</span>
          <button type="button" style="float: right;margin:0% 2% 0% 0%" class="btn btn-outline-primary btn-sm" id="abc" (click) ="show = !show">Add</button>
        </div>
        <div *ngIf="edited" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
          {{ message }}
        </div>
        <div *ngIf="deleted" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
          {{ message }}
        </div><br><br>
        <div class="row">
            <div class="col-lg-12">
              <div>
                <table class="table table-bordered table-striped table-sm">
                  <thead class="bg-success">
                      <tr>
                          <th>Action</th>
                          <th>Business Unit</th>
                          <th>Department</th>
                          <th>L2 Manager</th>
                          <th>HR Manager</th>
                          <th>System Admin</th>
                          <th>General Admin</th>
                          <th>Finance Manager</th>
                        </tr>
                      </thead>
                      <tbody>     
                         <tr *ngFor="let set of datas;let i = index " >
                          <td>
                            <i  (click)="edit(set);show=!show"  title="Edit" class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;
                            <i (click)="delete(set,i);abcd();" title="Delete" class="fa fa-trash-o"></i>&nbsp;&nbsp;
                            <i  *ngIf="set.id == editRowId" (click)="update(set)" title="Update" class="fa fa-floppy-o"></i>
                          </td>
                          <td>{{set.exitsetting[0].businessunit}}</td> 
                          <td>{{set.exitsetting[0].department}}</td>
                          <td>{{set.exitsetting[0].l2_manager}}</td>
                          <td>{{set.exitsetting[0].hr_manager}}</td>
                          <td>{{set.exitsetting[0].system_admin}}</td>
                          <td>{{set.exitsetting[0].general_admin}}</td>
                          <td>{{set.exitsetting[0].finance_manager}}</td>
                        </tr> 
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>          
            <form class="form-horizontal" [formGroup]="form">
            <div *ngIf= "show">
                <div >
                    <ol class="breadcrumb row bg-primary">
                      <li class="breadcrumb-item "><i class="fa  fa-home">Home </i></li>
                      <li class="breadcrumb-item ">HR </li>
                      <li class="breadcrumb-item ">Exit Procedure </li>
                      <li class="breadcrumb-item ">Settings</li>
                      <li class="breadcrumb-item active"><i class="fa fa-plus">Add</i></li>
                    </ol>
                  </div>
                  <br><br>
                  <div class="row">
                      <div class="col-md-3">
                          <md-select placeholder="Business Unit" [(ngModel)]="setting.exitsetting[0].businessunit" formControlName="businessunit" required>
                          <md-option *ngFor="let bu of bunits ; let i=index " (click)="selectdept(bu.businessunits[0].name,bu);selectGa(bu.businessunits[0].name,bu);selectL2(bu.businessunits[0].name,bu);selectFm(bu.businessunits[0].name,bu);selectSa(bu.businessunits[0].name,bu)" [value]= "bu.businessunits[0].name" >
                          {{bu.businessunits[0].name}}
                          </md-option>
                          </md-select><br>
                          <span  style="color: red;font-size: 10px;" *ngIf="!setting.exitsetting[0].businessunit">
                           * Please select businessunit.
                          </span>
                          <br><br><br><br> 

                          <md-select placeholder="System Admin" class="combo"  [(ngModel)]="setting.exitsetting[0].system_admin" formControlName="sa">
                          <md-option *ngFor="let system of officialdatasa" selected="selected" (click)="filterempsa(system);systemAdminId(setting,system);" value="{{ system.official[0].firstname }} {{ system.official[0].lastname }}">
                            {{ system.official[0].firstname }} {{ system.official[0].lastname }}
                          </md-option>
                          </md-select>
                        </div>
                        <br><br><br><br>

                        <div class="col-md-3">
                          <md-select placeholder="Department" [(ngModel)]="setting.exitsetting[0].department" formControlName="department" required>
                          <md-option *ngFor="let dp of dptoptionss"  [value]="dp.department[0].departmentname" (click)="selecthr(dp.department[0].departmentname,dp);">
                          {{dp.department[0].departmentname}}
                          </md-option>
                          </md-select>
                          <!-- <md-error>select Department.</md-error> --><br>
                          <span  style="color: red;font-size: 10px;" *ngIf="!setting.exitsetting[0].department">
                           * Please select department.
                          </span>
              
                          <br><br><br><br>
                          <md-select placeholder="General Admin" class="combo" name="indication_subject[]" [(ngModel)]="setting.exitsetting[0].general_admin" formControlName="ga">
                          <md-option *ngFor="let system of officialdataga" selected="selected" (click)="generalAdminId(setting,system);filteremp2(system);filterempFm(system);filteremp(system);" value="{{ system.official[0].firstname }} {{ system.official[0].lastname }}">
                          {{ system.official[0].firstname }} {{ system.official[0].lastname }}
                          </md-option>
                          </md-select><br><br><br>
                        </div>
                        <div class="col-md-3">
                          <md-select placeholder="HR Manager" id="hr" class="combo" name="indication_subject[]" [(ngModel)]="setting.exitsetting[0].hr_manager" formControlName="hr_manager" required>
                          <md-option *ngFor="let bu of offdata" (click)="hrid(setting,bu);selecteppp(bu);filteremp(bu);filteremp2(bu);" selected="selected" value="{{ bu.official[0].firstname }} {{ bu.official[0].lastname }}">
                           {{ bu.official[0].firstname }} {{ bu.official[0].lastname }}
                          </md-option>
                          </md-select><br>
                          <span  style="color: red;font-size: 10px;" *ngIf="!setting.exitsetting[0].hr_manager">
                            * Please select Hr Manager.</span>
                          <br><br><br><br>
                          <md-select placeholder="Finance Manager" class="combo" name="indication_subject[]" [(ngModel)]="setting.exitsetting[0].finance_manager" formControlName="fm">
                          <md-option *ngFor="let system of officialdatafm" selected="selected" (click)="financeid(setting,system);filterempFm(system)" value="{{ system.official[0].firstname }} {{ system.official[0].lastname }}">
                            {{ system.official[0].firstname }} {{ system.official[0].lastname }}
                          </md-option>
                          </md-select><br><br><br>
                        </div>
                        <div class="col-md-3">
                          <md-select placeholder="L2 Manager" class="combo" name="indication_subject[]" [(ngModel)]="setting.exitsetting[0].l2_manager" formControlName="l2_manager" required>
                          <md-option *ngFor="let bu of officialdatal2" (click)="l2id(setting,bu);filteremp(bu);filteremp2(bu);" selected="selected" value="{{ bu.official[0].firstname }} {{ bu.official[0].lastname }}">
                            {{ bu.official[0].firstname }} {{ bu.official[0].lastname }}
                          </md-option>
                          </md-select><br>
                          <!-- <span  style="color: red" *ngIf="emp">
                              Employee has already been selected.
                          </span> -->
                          <span  style="color: red;font-size: 10px;" *ngIf="!setting.exitsetting[0].l2_manager">
                            * Please select L2 Manager.
                          </span>
                          <br><br><br>
                          <md-input-container class="example-full-width">
                          <input mdInput placeholder="Notice Period" [(ngModel)]="setting.exitsetting[0].notice_period" formControlName="period" pattern="[0-9.]+" minlength="2" maxlength="3" required >
                          <md-error>enter only numbers.</md-error>
                          </md-input-container><i mdTooltip="Number of days including holidays and weekends" class="fa fa-question-circle"></i><br><br><br>
                        </div>
                      </div>
                      <div style="float: right;margin:0% 2% 0% 0%" class="row">
                        <div  class="col-md-12">
                          <button *ngIf="!updatebutton" class="btn btn-outline-primary btn-sm" (click)="save(setting);show=!show" [disabled]="!form.valid"> Save</button>
                          <button *ngIf="updatebutton"  class="btn btn-outline-success btn-sm" (click)="update(setting);show=!show;updatebutton=!updatebutton" [disabled]="!form.valid"> Update</button>
                          <button class="btn btn-outline-danger btn-sm" (click) = "cancel(setting);show=!show"> Cancel </button>
                        </div>
                      </div>
                     </div>
                    </form> 
                    </div>



                    
              
            