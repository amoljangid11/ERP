<div class="col-md-12 card card-outline-primary" style="height:100%">
  <div *ngIf = "!show" >
    <div >
      <ol class="breadcrumb row bg-primary">
        <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
        <li class="breadcrumb-item ">My request summary </li>
        <li class="breadcrumb-item active">Closed</li>
      </ol>
   </div> <br>
   <!-- <div >
    <span style="font-weight:500">All</span>
            <button type="button" style="float: right;margin:0% 2% 0% 0%" class="btn btn-outline-primary btn-sm"  (click) = "show=!show;updatebutton=false;">Add</button>  
   </div><br><br> -->
   
    <div *ngIf="edited" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
         {{ message }}
       </div>
   <div *ngIf="deleted" [ngClass]="messageClass"  style="text-align:center;margin-left:30%;padding: 0.5% 0.5% 0.5% 0.5%;width:40%;float:center">
         {{ message }}
   </div>

   <div class="row">
    <div class="col-lg-12">
    <table  class="table table-bordered table-striped table-sm">
        <thead class="bg-success">
            <tr >
                 <th>Ticket#</th>
                 <th>Request For</th>
                 <th>Category</th>
                 <th>Request Type/Asset Name</th>
                 <th>Priority</th>
                 <th>Description</th>
                 <th>Raised By</th>
                 <th>Raised On</th>
                 <th>Status</th>



            </tr>
             </thead>
             <tbody>
        <tr  *ngFor="let a of obk;let i = index " (click)="show=!show;updatebutton=false;view(a)">
          <td >{{a.allservicereq[0].ticket}} </td>
          <td >{{a.allservicereq[0].requestfor}}</td>
           <td >{{a.allservicereq[0].category}}</td> 
           <td>{{a.allservicereq[0].requesttype}}</td>
           <td>{{a.allservicereq[0].priority}}</td>
           <td>{{a.allservicereq[0].description}}</td>
           <td >{{a.allservicereq[0].raisedby}}</td>
           <td>{{a.allservicereq[0].date | date }}</td>    
           <td>{{a.allservicereq[0].status }}</td>
           <!-- <td>{{"aksjahaj"}}</td>  
           <td>{{"aksjahaj"}}</td>       -->
        </tr>                                                                 
           </tbody>   

             <tbody *ngIf="this.getuser.utype=='Management'">
        <tr  *ngFor="let a of oobj1;let i = index " (click)="show=!show;updatebutton=false;view(a)">
          <td >{{a.allservicereq[0].ticket}} </td>
          <td >{{a.allservicereq[0].requestfor}}</td>
           <td >{{a.allservicereq[0].category}}</td> 
           <td>{{a.allservicereq[0].requesttype}}</td>
           <td>{{a.allservicereq[0].priority}}</td>
           <td>{{a.allservicereq[0].description}}</td>
           <td >{{a.allservicereq[0].raisedby}}</td>
           <td>{{a.allservicereq[0].date | date }}</td>    
           <td>{{a.allservicereq[0].management1status}}</td>
           <!-- <td>{{"aksjahaj"}}</td> --> 
           <!-- <td>{{"aksjahaj"}}</td>        -->
        </tr>                                                                 
           </tbody> 
           
           <tbody >
            <tr  *ngFor="let a of oobj11;let i = index " (click)="show=!show;updatebutton=false;view(a)">
              <td >{{a.allservicereq[0].ticket}} </td>
              <td >{{a.allservicereq[0].requestfor}}</td>
               <td >{{a.allservicereq[0].category}}</td> 
               <td>{{a.allservicereq[0].requesttype}}</td>
               <td>{{a.allservicereq[0].priority}}</td>
               <td>{{a.allservicereq[0].description}}</td>
               <td >{{a.allservicereq[0].raisedby}}</td>
               <td>{{a.allservicereq[0].date | date }}</td>    
               <td>{{a.allservicereq[0].management2status}}</td>
               <!-- <td>{{"aksjahaj"}}</td> 
               <td>{{"aksjahaj"}}</td>    -->   
            </tr>                                                                 
               </tbody> 




                <tbody>
                <tr  *ngFor="let a of oobj12;let i = index " (click)="show=!show;updatebutton=false;view(a)">
                  <td >{{a.allservicereq[0].ticket}} </td>
                  <td >{{a.allservicereq[0].requestfor}}</td>
                   <td >{{a.allservicereq[0].category}}</td> 
                   <td>{{a.allservicereq[0].requesttype}}</td>
                   <td>{{a.allservicereq[0].priority}}</td>
                   <td>{{a.allservicereq[0].description}}</td>
                   <td >{{a.allservicereq[0].raisedby}}</td>
                   <td>{{a.allservicereq[0].date | date }}</td>    
                   <td>{{a.allservicereq[0].management3status}}</td>
                       
                </tr>                                                                 
                   </tbody>  
    
    
    <!--
                   <tbody>
                    <tr  *ngFor="let a of oobj22;let i = index " (click)="show=!show;updatebutton=false;view(a)">
                      <td >{{a.allservicereq[0].ticket}} </td>
                      <td >{{a.allservicereq[0].requestfor}}</td>
                       <td >{{a.allservicereq[0].category}}</td> 
                       <td>{{a.allservicereq[0].requesttype}}</td>
                       <td>{{a.allservicereq[0].priority}}</td>
                       <td>{{a.allservicereq[0].description}}</td>
                       <td >{{a.allservicereq[0].raisedby}}</td>
                       <td>{{a.allservicereq[0].date | date }}</td>    
                       <td>{{a.allservicereq[0].status}}</td>
                       <!-- <td>{{"aksjahaj"}}</td>  
                       <td>{{"aksjahaj"}}</td>       
                    </tr>                                                                 
                       </tbody>   -->

                       
   </table>
</div>
</div>
</div>


<!-- <div id="clsreq">
  <label>Action</label>
  <md-select placeholder="Select Action" [(ngModel)]="allss.allservicereq[0].status">
    <md-option  [value]="Approve">
       Approve
    </md-option>
    <md-option  [value]="Reject">
      Reject
   </md-option>
</md-select>
<button type="button"  (click)= "requestcancel(allss)">Submit</button>

</div> -->




<div *ngIf= "show">
    <div >
        <ol class="breadcrumb row bg-primary">
          <li class="breadcrumb-item "> <i class="fa  fa-home">Home </i></li>
          <li class="breadcrumb-item ">My request summary </li>
          <li class="breadcrumb-item active">Closed</li>
          <!-- <li class="breadcrumb-item active"><i class="fa fa-plus">Add</i></li> -->
        </ol>
      </div><br><br>


     
    <div class=" row box">
          
        <div class="emp-info">
            Status  : {{alls.allservicereq[0].executorstatus || alls.allservicereq[0].tempstatus}}
        </div>
        <div class="emp-info">
            Ticket : {{alls.allservicereq[0].ticket}}
        </div><br>
        
        <div class="emp-info alter-div">
            Category:{{alls.allservicereq[0].category}}
        </div>
        <div class="emp-info alter-div">
            Request Type:{{alls.allservicereq[0].requesttype}}
        </div><br>
        <div class="emp-info">
            Priority:{{alls.allservicereq[0].priority}}
        </div>
        <div class="emp-info">
            Description:{{alls.allservicereq[0].description}}
        </div><br>
        <div class="emp-info alter-div">
            Request For:{{alls.allservicereq[0].requestfor}}
        </div>
        <div class="emp-info alter-div">
            Raised On:{{alls.allservicereq[0].date | date}}
        </div><br>
      </div> 
      <br>
      <h6>Raised by</h6>
      <div class=" row box">
          <div class="emp-info">
              Employee Name:{{this.empname}}
          </div>
          <div class="emp-info">
              Employee ID:{{alls.allservicereq[0].raisedby}}
          </div><br>
          <div class="emp-info alter-div">
              Reporting Manager:{{this.repo}}
          </div>
          <div class="emp-info alter-div">
              Approver 1:{{this.approver1}}
          </div><br>
          <div class="emp-info">
              Approver 2:{{this.approver2}}
          </div>
          <div class="emp-info">
              Approver 3:{{this.approver3}}
          </div><br>
          <div class="emp-info alter-div">
            Executors:{{this.exec}}
          </div>
      </div>




<br>
<h5>Request History</h5>
<div class="row ">
      <table class="table  table-sm">  
        <tbody> 
          <tr>
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td>{{alls.allservicereq[0].category}} Request has been raised by {{this.empname}} </td>
               <td>{{alls.allservicereq[0].date | date}}</td>
          </tr>


  
          <tr  *ngIf="alls.allservicereq[0].managerstatus=='Send to Manager' ">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td>{{alls.allservicereq[0].category}} Request has been sent for manager approval by {{this.exec}} </td>
              <td>{{alls.allservicereq[0].managerdate | date}}</td>
              </tr>
  
  
          <tr  *ngIf="alls.allservicereq[0].managerstatus=='Send to Manager' && alls.allservicereq[0].finalmanagerstatus">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been  {{alls.allservicereq[0].finalmanagerstatus}} by {{this.repo}}</td>
               <td>{{alls.allservicereq[0].finalmanagerdate | date}}</td>
              </tr>
              
  
          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='1' && alls.allservicereq[0].managementstatus=='Send to Management' ">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been sent for management approval by {{this.exec}} </td>
               <td>{{alls.allservicereq[0].managementdate | date}}</td>

          </tr>
          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='1' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management1status}} by {{this.approver1}} </td>
               <td>{{alls.allservicereq[0].management1date | date}}</td>
          </tr>
  






          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='2' && alls.allservicereq[0].managementstatus=='Send to Management' && !alls.allservicereq[0].management1status">
            <td>
              <img class="imageClass" src="./assets/Images/employee.jpg"/>
            </td>
            <td> {{alls.allservicereq[0].category}} Request has been sent for management approval by {{this.exec}} </td>
            <td>{{alls.allservicereq[0].managementdate | date}}</td>           
           </tr>

          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='2' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Rejected'">
            <td>
              <img class="imageClass" src="./assets/Images/employee.jpg"/>
            </td>
             <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management1status}} by {{this.approver1}} </td>
             <td>{{alls.allservicereq[0].management1date | date}}</td>
            </tr>
  
          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='2' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Approved' ">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been sent for management approval by {{this.approver1}} </td>
               <td>{{alls.allservicereq[0].management1date | date}}</td>
          </tr>
          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='2' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Approved' && alls.allservicereq[0].management2status">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management2status}} by {{this.approver2}} </td>
               <td>{{alls.allservicereq[0].management2date | date}}</td>
              </tr>




              
  
  


              <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && !alls.allservicereq[0].management1status">
                <td>
                  <img class="imageClass" src="./assets/Images/employee.jpg"/>
                </td>
                <td> {{alls.allservicereq[0].category}} Request has been sent for management approval by {{this.exec}} </td>
                <td>{{alls.allservicereq[0].managementdate | date}}</td>           
               </tr>

              <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Rejected'">
                <td>
                  <img class="imageClass" src="./assets/Images/employee.jpg"/>
                </td>
                 <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management1status}} by {{this.approver1}} </td>
                 <td>{{alls.allservicereq[0].management1date | date}}</td>
                </tr>

                <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Approved' ">
                  <td>
                    <img class="imageClass" src="./assets/Images/employee.jpg"/>
                  </td>
                   <td> {{alls.allservicereq[0].category}} Request has been sent for management approval by {{this.approver1}} </td>
                   <td>{{alls.allservicereq[0].management1date | date}}</td>
                  </tr>

                  <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management2status=='Rejected'">
                    <td>
                      <img class="imageClass" src="./assets/Images/employee.jpg"/>
                    </td>
                     <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management2status}} by {{this.approver2}} </td>
                     <td>{{alls.allservicereq[0].management2date | date}}</td>
                    </tr>

                    <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management2status=='Approved'">
                      <td>
                        <img class="imageClass" src="./assets/Images/employee.jpg"/>
                      </td>
                       <td> {{alls.allservicereq[0].category}} Request has been  sent for management approval by {{this.approver2}} </td>
                       <td>{{alls.allservicereq[0].management2date | date}}</td>
                      </tr>

                 
          <tr  *ngIf="alls.allservicereq[0].NoOfApprovers=='3' && alls.allservicereq[0].managementstatus=='Send to Management' && alls.allservicereq[0].management1status=='Approved' && alls.allservicereq[0].management2status=='Approved' && alls.allservicereq[0].management3status">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].management3status}} by {{this.approver3}} </td>
               <td>{{alls.allservicereq[0].management3date | date}}</td>

              </tr>
  
          <tr  *ngIf="alls.allservicereq[0].executorstatus">
              <td>
                <img class="imageClass" src="./assets/Images/employee.jpg"/>
              </td>
               <td> {{alls.allservicereq[0].category}} Request has been {{alls.allservicereq[0].executorstatus}} by {{this.exec}} </td>
               <td>{{alls.allservicereq[0].executordate | date}}</td>

          </tr>

</tbody>
</table>




</div> 
</div>
</div>